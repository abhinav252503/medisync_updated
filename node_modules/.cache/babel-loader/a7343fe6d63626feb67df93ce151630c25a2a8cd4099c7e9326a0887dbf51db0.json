{"ast":null,"code":"// // File: src/pages/Upload.js\n// import React, { useState } from \"react\";\n// import axios from \"axios\";\n// import { useUserStore } from \"../store/user_store\";\n\n// const Upload = () => {\n//   const { user } = useUserStore();\n//   const [form, setForm] = useState({ patientId: \"\", diagnosis: \"\" });\n//   const [file, setFile] = useState(null);\n//   const [loading, setLoading] = useState(false);\n\n//   const handleChange = (e) => {\n//     const { name, value } = e.target;\n//     setForm((prev) => ({ ...prev, [name]: value }));\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     if (!file) return alert(\"Please attach a file.\");\n\n//     const formData = new FormData();\n//     formData.append(\"patientId\", form.patientId);\n//     formData.append(\"diagnosis\", form.diagnosis);\n//     formData.append(\"doctorId\", user.id);\n//     formData.append(\"file\", file);\n\n//     setLoading(true);\n//     try {\n//       await axios.post(\"/api/upload/prescription\", formData);\n//       alert(\"Prescription uploaded successfully.\");\n//       setForm({ patientId: \"\", diagnosis: \"\" });\n//       setFile(null);\n//     } catch (err) {\n//       alert(\"Upload failed. Try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gray-100 py-10 px-6\">\n//       <div className=\"max-w-2xl mx-auto bg-white p-6 rounded shadow\">\n//         <h2 className=\"text-2xl font-semibold mb-6\">Upload Prescription</h2>\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\n//           <input\n//             name=\"patientId\"\n//             value={form.patientId}\n//             onChange={handleChange}\n//             placeholder=\"Patient ID\"\n//             required\n//             className=\"w-full px-4 py-2 border rounded\"\n//           />\n//           <textarea\n//             name=\"diagnosis\"\n//             value={form.diagnosis}\n//             onChange={handleChange}\n//             placeholder=\"Diagnosis Summary\"\n//             required\n//             rows={3}\n//             className=\"w-full px-4 py-2 border rounded\"\n//           />\n//           <input\n//             type=\"file\"\n//             accept=\"application/pdf,image/*\"\n//             onChange={(e) => setFile(e.target.files[0])}\n//             required\n//             className=\"w-full\"\n//           />\n//           <button\n//             type=\"submit\"\n//             disabled={loading}\n//             className=\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700\"\n//           >\n//             {loading ? \"Uploading...\" : \"Upload Prescription\"}\n//           </button>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Upload;","map":{"version":3,"names":[],"sources":["D:/medsync/medisync-frontend/src/pages/upload_page.js"],"sourcesContent":["// // File: src/pages/Upload.js\n// import React, { useState } from \"react\";\n// import axios from \"axios\";\n// import { useUserStore } from \"../store/user_store\";\n\n// const Upload = () => {\n//   const { user } = useUserStore();\n//   const [form, setForm] = useState({ patientId: \"\", diagnosis: \"\" });\n//   const [file, setFile] = useState(null);\n//   const [loading, setLoading] = useState(false);\n\n//   const handleChange = (e) => {\n//     const { name, value } = e.target;\n//     setForm((prev) => ({ ...prev, [name]: value }));\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     if (!file) return alert(\"Please attach a file.\");\n\n//     const formData = new FormData();\n//     formData.append(\"patientId\", form.patientId);\n//     formData.append(\"diagnosis\", form.diagnosis);\n//     formData.append(\"doctorId\", user.id);\n//     formData.append(\"file\", file);\n\n//     setLoading(true);\n//     try {\n//       await axios.post(\"/api/upload/prescription\", formData);\n//       alert(\"Prescription uploaded successfully.\");\n//       setForm({ patientId: \"\", diagnosis: \"\" });\n//       setFile(null);\n//     } catch (err) {\n//       alert(\"Upload failed. Try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gray-100 py-10 px-6\">\n//       <div className=\"max-w-2xl mx-auto bg-white p-6 rounded shadow\">\n//         <h2 className=\"text-2xl font-semibold mb-6\">Upload Prescription</h2>\n//         <form onSubmit={handleSubmit} className=\"space-y-4\">\n//           <input\n//             name=\"patientId\"\n//             value={form.patientId}\n//             onChange={handleChange}\n//             placeholder=\"Patient ID\"\n//             required\n//             className=\"w-full px-4 py-2 border rounded\"\n//           />\n//           <textarea\n//             name=\"diagnosis\"\n//             value={form.diagnosis}\n//             onChange={handleChange}\n//             placeholder=\"Diagnosis Summary\"\n//             required\n//             rows={3}\n//             className=\"w-full px-4 py-2 border rounded\"\n//           />\n//           <input\n//             type=\"file\"\n//             accept=\"application/pdf,image/*\"\n//             onChange={(e) => setFile(e.target.files[0])}\n//             required\n//             className=\"w-full\"\n//           />\n//           <button\n//             type=\"submit\"\n//             disabled={loading}\n//             className=\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700\"\n//           >\n//             {loading ? \"Uploading...\" : \"Upload Prescription\"}\n//           </button>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Upload;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}